<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>健康循环提醒</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- 版本和更新 -->
    <div class="version-bar">
        <span>v1.0.1</span>
        <span id="updateStatus"></span>
        <button id="checkUpdateBtn" onclick="checkUpdate()" style="display:none;">检查更新</button>
    </div>

    <!-- 状态 -->
    <div class="status-bar">
        <div class="status-dot" id="statusDot"></div>
        <span id="statusText">准备开始</span>
    </div>

    <!-- 计时器 -->
    <div class="timer-container">
        <svg class="timer-ring" viewBox="0 0 220 220">
            <circle class="timer-ring-bg" cx="110" cy="110" r="100"/>
            <circle class="timer-ring-progress" id="progressRing" cx="110" cy="110" r="100"/>
        </svg>
        <div class="timer-content">
            <div class="timer-mode" id="modeText">工作</div>
            <div class="timer-display" id="timerDisplay">30:00</div>
            <div class="timer-cycle">第 <span id="cycleCount">1</span> 轮</div>
        </div>
    </div>

    <!-- 控制 -->
    <div class="controls">
        <button class="btn btn-primary" id="mainBtn" onclick="toggleTimer()">▶ 开始</button>
        <button class="btn btn-secondary" onclick="resetTimer()">↺ 重置</button>
    </div>

    <!-- 设置 -->
    <div class="settings-card">
        <div class="settings-title">设置</div>
        <div class="setting-row">
            <span>工作时长</span>
            <div>
                <input type="number" class="time-input" id="workInput" value="30" min="1" max="120">
                <span class="unit">分钟</span>
            </div>
        </div>
        <div class="setting-row">
            <span>休息时长</span>
            <div>
                <input type="number" class="time-input" id="restInput" value="15" min="1" max="60">
                <span class="unit">分钟</span>
            </div>
        </div>
        <div class="setting-row">
            <span>提示音</span>
            <div class="toggle active" id="soundToggle" onclick="toggleSound()"></div>
        </div>
        <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="70">
    </div>

    <!-- 统计 -->
    <div class="stats">
        <div class="stat">
            <div class="stat-value" id="workCount">0</div>
            <div class="stat-label">工作轮次</div>
        </div>
        <div class="stat">
            <div class="stat-value" id="totalTime">0</div>
            <div class="stat-label">总时长</div>
        </div>
        <div class="stat">
            <div class="stat-value" id="currentStreak">1</div>
            <div class="stat-label">当前轮次</div>
        </div>
    </div>

    <!-- 提醒弹窗 -->
    <div class="overlay" id="workOverlay">
        <div class="overlay-content">
            <div class="overlay-icon">🍃</div>
            <h2 class="overlay-title">该休息了！</h2>
            <p class="overlay-text">第 <span id="overlayCycle">1</span> 轮完成<br>休息 <span id="overlayRestTime">15</span> 分钟</p>
            <button class="overlay-btn" onclick="dismissOverlay('work')">开始休息</button>
        </div>
    </div>

    <div class="overlay rest" id="restOverlay">
        <div class="overlay-content">
            <div class="overlay-icon">💪</div>
            <h2 class="overlay-title">休息结束！</h2>
            <p class="overlay-text">开始第 <span id="overlayNextCycle">2</span> 轮？</p>
            <button class="overlay-btn" onclick="dismissOverlay('rest')">开始工作</button>
        </div>
    </div>

    <!-- 更新弹窗 -->
    <div class="update-modal" id="updateModal">
        <div class="update-content">
            <h2>🎉 发现新版本</h2>
            <p id="updateInfo">检测到新版本 v1.1.0，建议更新以获得更好体验。</p>
            <div class="update-progress" id="updateProgress">
                <div class="update-progress-bar" id="progressBar"></div>
            </div>
            <div class="update-buttons">
                <button class="btn-update" onclick="doUpdate()">立即更新</button>
                <button class="btn-later" onclick="closeUpdate()">稍后提醒</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
